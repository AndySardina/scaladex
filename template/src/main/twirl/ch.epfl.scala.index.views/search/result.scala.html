@import akka.http.scaladsl.model.Uri

@import ch.epfl.scala.index.views.html._

@import ch.epfl.scala.index.model.Project
@import ch.epfl.scala.index.model.misc.Pagination
@import ch.epfl.scala.index.model.Release
@import ch.epfl.scala.index.model.misc.Pagination
@import ch.epfl.scala.index.model.misc.UserInfo
@import ch.epfl.scala.index.model.misc.Url

@(query: String = "",
  uri: Uri,
  sortBy: Option[String],
  pagination: Pagination,
  projects: List[Project],
  user: Option[UserInfo],
  you: Boolean,
  keywords: Map[String, Long],
  targets: Map[String, Long])


<div class="row">
  <div class="col-md-2">
    <div class="result-count">
      @if(pagination.current == 1) {
        @pagination.total results
      } else {
        Page @pagination.current of @pagination.total results
      }
    </div>
  </div>
  <div class="col-md-10">
    @sorting(query, sortBy, pagination, you)
  </div>
</div>
<div class="row">
  <div class="col-md-3">
    @filter(keywords, targets)
  </div>      
  <div class="col-md-9">
    @resultList(projects)
    @{paginate(pagination,
      sortBy
        .map(s => uri.appendQuery("sort" -> s))
        .getOrElse(uri)
        .appendQuery("you", you)
        .appendQuery("q" -> query)
    )}
  </div>
</div>
